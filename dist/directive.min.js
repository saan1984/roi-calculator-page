/*!
 * roi-calculator
 * 
 * Version: 0.0.1 - 2015-09-23T05:02:40.930Z
 * License: ISC
 */
"use strict";var ptgDirectives=angular.module("ptg.directives",["ngResource","ngSanitize","ui.bootstrap","rzModule"]);ptgDirectives.filter("notIntuitProductFilter",function(){return function(e){var t=[];return angular.forEach(e,function(e,s){angular.isDefined(e.intuitProduct)&&!e.intuitProduct&&t.push(e)}),t}}),ptgDirectives.filter("otherFilter",function(){return function(e){var t=angular.isUndefined(e);return t?"Other":e}}),ptgDirectives.controller("CalculatorController",function(e,t){e.handleItemChange=function(){var t=e.noOfRefund;e.fields.noRefundSlider.visible=!0,null==t?(e.noOfRefundS=0,e.noOfRefund=0):t>e.fields.noRefundSlider.ceil?e.fields.noRefundSlider.visible=!1:e.noOfRefundS=t,e.applyFormulaes()},e.applyFormulaes=function(){var s=e.bank,r=e.product,n=e.noOfRefund,l=angular.isDefined(s)&&null!==s&&angular.isDefined(r)&&null!==r&&angular.isDefined(n)&&null!==n;l&&angular.forEach(e.formulaes,function(s,r){{var n=Object.keys(s);n[0]}angular.forEach(s,function(s,r){null!=r&&t(r).assign(e.data,t(s)(e))})})},e.$watch("noOfRefund",function(t,s){t!==s&&e.handleItemChange()})}),ptgDirectives.directive("roiCalculator",function(e,t){return{restrict:"E",templateUrl:"directive.html",scope:{banksUrl:"@banksUrl",productUrl:"@productsUrl",fieldUrl:"@fieldsUrl",formulaeUrl:"@formulaesUrl",quoteUrl:"@quoteUrl"},controller:"CalculatorController",replace:!0,link:function(s,r,n){var l=e.getBanksList(s.banksUrl).$promise,i=e.getProductList(s.productUrl).$promise,a=e.getFieldList(s.fieldUrl).$promise,d=e.getFormulaeList(s.formulaeUrl).$promise;t.all([l,i,a,d]).then(function(e){s.banks=e[0],s.products=e[1],s.fields=e[2],s.formulaes=e[3],s.data={},s.noOfRefund=s.fields.noRefundSlider.value,s.applyFormulaes()})}}}),ptgDirectives.service("DataService",function(e){return{getBanksList:function(t){return e(t,{},{list:{method:"POST",isArray:!1}}).get()},getProductList:function(t){return e(t,{},{list:{method:"POST",isArray:!1}}).get()},getFormulaeList:function(t){return e(t,{},{list:{method:"POST",isArray:!0}}).query()},getFieldList:function(t){return e(t,{},{list:{method:"POST",isArray:!1}}).get()}}}),angular.module("ptg.directives").run(["$templateCache",function(e){e.put("directive.html",'<div class="widget-container"><div class="row"><div class="col-sm-12"><div class="panel card ptg-header-section"><div class="row"><h1 class="text-center panel-heading hy-text-light">Tax Refund ROI Calculator</h1><h3 class="hy-text-light text-center text-primary roi-subtitle">See how much more money you can be putting in your text</h3></div><div class="row ptg-vertical-gap"><div class="col-sm-6"><div class="form-group"><label for="noRefTransfer" class="pull-left hy-heading">{{fields.noRefundSlider.label}}</label> <input type="number" ng-model="noOfRefund" ng-value="fields.noRefundSlider.value" ng-change="handleItemChange()" class="form-control hy-number" min="{{fields.noRefundSlider.floor}}" step="1" id="noRefTransfer"></div><div class="form-group"><div class="slider-container"><rzslider ng-show="fields.noRefundSlider.visible" class="ptg-slider hy-number" rz-slider-model="noOfRefund" rz-slider-on-change="handleItemChange()" rz-slider-floor="fields.noRefundSlider.floor" rz-slider-ceil="fields.noRefundSlider.ceil"></rzslider></div></div></div><div class="col-sm-6"><div class="form-group"><label for="provider" class="control-label pull-left">{{fields.product.label}}</label><select class="form-control" ng-change="handleItemChange()" id="provider" ng-model="product" ng-options="v.name for (k,v) in products| notIntuitProductFilter"><option value="">-Select-</option></select></div><div class="form-group"><label for="bank" class="control-label pull-left">{{fields.bank.label}}</label><select class="form-control" ng-change="handleItemChange()" id="bank" ng-model="bank" ng-options="c.name for c in banks"><option value="">-Select-</option></select></div></div></div></div></div></div><div class="row" ng-if="data.difference"><div class="col-sm-6"><h5 class="hy-text-light text-warning" ng-bind-html="fields.productMessage"></h5></div><div class="col-sm-3"><a ng-href="{{quoteUrl}}" class="btn btn-warning btn-block hy-bg-orange3 quote-link">Request Quote</a></div><div class="col-sm-3"><h5 class="hy-text-light text-success profit-message">You could profit by <span class="hy-number-light hy-number-md">{{data.difference | currency}}</span> using ProSeriese.</h5></div></div><div class="row"><div class="col-sm-6"><div class="card panel"><div class="card-header"><h1 class="panel-heading hy-text-light product-name">{{product.name | otherFilter}} Software</h1></div><table class="table"><thead><tr><td class="">Bank Fees</td><td class="text-danger hy-number">{{data.bankFeeOther | currency}}</td></tr></thead><tbody><tr><td>Added RT <span class="hidden-xs hidden-sm">Processing Fees</span> <sub class="visible-sm visible-xs">Processing Fees</sub></td><td class="text-danger hy-number">{{data.processFeeOther | currency}}</td></tr><tr><td>Intuit RT <span class="hidden-xs hidden-sm">Incentive</span> <sub class="visible-sm visible-xs">Incentive</sub></td><td class="text-danger hy-number">{{data.incentiveOther | currency}}</td></tr></tbody><tfoot class="ptg-footer hy-bg-brightblue3"><tr><td><strong>Total Cost <span class="hidden-xs hidden-sm">Total Cost</span> <sub class="visible-sm visible-xs">For {{data.noRefundSlider.value}} Returns</sub></strong></td><td popover="ROI" popover-placement="bottom"><strong class="hy-number">{{ data.totalOther | currency}}</strong></td></tr></tfoot></table></div></div><div class="col-sm-6"><div class="card panel"><div class="card-header"><h1 class="panel-heading hy-text-light text-left product-name">ProSeries</h1></div><table class="table"><thead><tr><td class="">Bank Fees</td><td class="text-success hy-number">{{data.bankFeePro | currency}}</td></tr></thead><tbody><tr><td>Added RT <span class="hidden-xs hidden-sm">Processing Fees</span> <sub class="visible-sm visible-xs">Processing Fees</sub></td><td class="text-success hy-number">{{data.processFeePro | currency}}</td></tr><tr><td>Intuit RT <span class="hidden-xs hidden-sm">Incentive</span> <sub class="visible-sm visible-xs">Incentive</sub></td><td class="text-success hy-number">{{data.incentivePro | currency}}</td></tr></tbody><tfoot class="ptg-footer hy-bg-brightblue3"><tr><td><strong>Total Cost <span class="hidden-xs hidden-sm">Total Cost</span> <sub class="visible-sm visible-xs">For {{data.noRefundSlider.value}} Returns</sub></strong></td><td><strong class="hy-number">{{data.totalPro | currency}}</strong></td></tr></tfoot></table></div></div></div></div>')}]);